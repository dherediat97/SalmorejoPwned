var AsciinemaPlayer=function(e){"use strict";class t{log(){}debug(){}info(){}warn(){}error(){}}const n=Symbol("solid-proxy"),r="function"==typeof Proxy,o=Symbol("solid-track"),s={equals:(e,t)=>e===t};let i=N;const l=1,a=2,c={owned:null,cleanups:null,context:null,owner:null};var u=null;let d=null,f=null,h=null,p=null,g=0;function v(e,t){const n=f,r=u,o=0===e.length,s=void 0===t?r:t,i=o?c:{owned:null,cleanups:null,context:s?s.context:null,owner:s},l=o?e:()=>e((()=>w((()=>W(i)))));u=i,f=null;try{return O(l,!0)}finally{f=n,u=r}}function m(e,t){const n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},s,t):s).equals||void 0};return[E.bind(n),e=>("function"==typeof e&&(e=e(n.value)),P(n,e))]}function y(e,t,n){M(T(e,t,!1,l))}function b(e,t,n){n=n?Object.assign({},s,n):s;const r=T(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,M(r),E.bind(r)}function k(e){return O(e,!1)}function w(e){if(null===f)return e();const t=f;f=null;try{return e()}finally{f=t}}function $(e){!function(e,t){i=H;const n=T(e,t,!1,l);n.user=!0,p?p.push(n):M(n)}((()=>w(e)))}function A(e){return null===u||(null===u.cleanups?u.cleanups=[e]:u.cleanups.push(e)),e}function L(){return f}function x(e){const t=f,n=u;return Promise.resolve().then((()=>{f=t,u=n,O(e,!1),f=u=null}))}const[C,_]=m(!1);function S(e){const t=b(e),n=b((()=>D(t())));return n.toArray=()=>{const e=n();return Array.isArray(e)?e:null!=e?[e]:[]},n}function E(){if(this.sources&&this.state)if(this.state===l)M(this);else{const e=h;h=null,O((()=>j(this)),!1),h=e}if(f){const e=this.observers?this.observers.length:0;f.sources?(f.sources.push(this),f.sourceSlots.push(e)):(f.sources=[this],f.sourceSlots=[e]),this.observers?(this.observers.push(f),this.observerSlots.push(f.sources.length-1)):(this.observers=[f],this.observerSlots=[f.sources.length-1])}return this.value}function P(e,t,n){let r=e.value;return e.comparator&&e.comparator(r,t)||(e.value=t,e.observers&&e.observers.length&&O((()=>{for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t],r=d&&d.running;r&&d.disposed.has(n),(r?n.tState:n.state)||(n.pure?h.push(n):p.push(n),n.observers&&z(n)),r||(n.state=l)}if(h.length>1e6)throw h=[],new Error}),!1)),t}function M(e){if(!e.fn)return;W(e);const t=g;!function(e,t,n){let r;const o=u,s=f;f=u=e;try{r=e.fn(t)}catch(t){return e.pure&&(e.state=l,e.owned&&e.owned.forEach(W),e.owned=null),e.updatedAt=n+1,B(t)}finally{f=s,u=o}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?P(e,r):e.value=r,e.updatedAt=n)}(e,e.value,t)}function T(e,t,n,r=l,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:u,context:u?u.context:null,pure:n};return null===u||u!==c&&(u.owned?u.owned.push(s):u.owned=[s]),s}function F(e){if(0===e.state)return;if(e.state===a)return j(e);if(e.suspense&&w(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<g);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if((e=t[n]).state===l)M(e);else if(e.state===a){const n=h;h=null,O((()=>j(e,t[0])),!1),h=n}}function O(e,t){if(h)return e();let n=!1;t||(h=[]),p?n=!0:p=[],g++;try{const t=e();return function(e){h&&(N(h),h=null);if(e)return;const t=p;p=null,t.length&&O((()=>i(t)),!1)}(n),t}catch(e){n||(p=null),h=null,B(e)}}function N(e){for(let t=0;t<e.length;t++)F(e[t])}function H(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:F(r)}for(t=0;t<n;t++)F(e[t])}function j(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const e=r.state;e===l?r!==t&&(!r.updatedAt||r.updatedAt<g)&&F(r):e===a&&j(r,t)}}}function z(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=a,n.pure?h.push(n):p.push(n),n.observers&&z(n))}}function W(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){const e=r.pop(),o=t.observerSlots.pop();n<r.length&&(e.sourceSlots[o]=n,r[n]=e,t.observerSlots[n]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)W(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)W(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function B(e,t=u){const n=function(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}(e);throw n}function D(e){if("function"==typeof e&&!e.length)return D(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=D(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}const K=Symbol("fallback");function q(e){for(let t=0;t<e.length;t++)e[t]()}function Z(e,t){return w((()=>e(t||{})))}function R(){return!0}const I={get:(e,t,r)=>t===n?r:e.get(t),has:(e,t)=>t===n||e.has(t),set:R,deleteProperty:R,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:R,deleteProperty:R}),ownKeys:e=>e.keys()};function U(e){return(e="function"==typeof e?e():e)?e:{}}function X(){for(let e=0,t=this.length;e<t;++e){const t=this[e]();if(void 0!==t)return t}}const G=e=>`Stale read from <${e}>.`;function V(e){const t="fallback"in e&&{fallback:()=>e.fallback};return b(function(e,t,n={}){let r=[],s=[],i=[],l=0,a=t.length>1?[]:null;return A((()=>q(i))),()=>{let c,u,d=e()||[],f=d.length;return d[o],w((()=>{let e,t,o,p,g,m,y,b,k;if(0===f)0!==l&&(q(i),i=[],r=[],s=[],l=0,a&&(a=[])),n.fallback&&(r=[K],s[0]=v((e=>(i[0]=e,n.fallback()))),l=1);else if(0===l){for(s=new Array(f),u=0;u<f;u++)r[u]=d[u],s[u]=v(h);l=f}else{for(o=new Array(f),p=new Array(f),a&&(g=new Array(f)),m=0,y=Math.min(l,f);m<y&&r[m]===d[m];m++);for(y=l-1,b=f-1;y>=m&&b>=m&&r[y]===d[b];y--,b--)o[b]=s[y],p[b]=i[y],a&&(g[b]=a[y]);for(e=new Map,t=new Array(b+1),u=b;u>=m;u--)k=d[u],c=e.get(k),t[u]=void 0===c?-1:c,e.set(k,u);for(c=m;c<=y;c++)k=r[c],u=e.get(k),void 0!==u&&-1!==u?(o[u]=s[c],p[u]=i[c],a&&(g[u]=a[c]),u=t[u],e.set(k,u)):i[c]();for(u=m;u<f;u++)u in o?(s[u]=o[u],i[u]=p[u],a&&(a[u]=g[u],a[u](u))):s[u]=v(h);s=s.slice(0,l=f),r=d.slice(0)}return s}));function h(e){if(i[u]=e,a){const[e,n]=m(u);return a[u]=n,t(d[u],e)}return t(d[u])}}}((()=>e.each),e.children,t||void 0))}function J(e){const t="fallback"in e&&{fallback:()=>e.fallback};return b(function(e,t,n={}){let r,s=[],i=[],l=[],a=[],c=0;return A((()=>q(l))),()=>{const u=e()||[],d=u.length;return u[o],w((()=>{if(0===d)return 0!==c&&(q(l),l=[],s=[],i=[],c=0,a=[]),n.fallback&&(s=[K],i[0]=v((e=>(l[0]=e,n.fallback()))),c=1),i;for(s[0]===K&&(l[0](),l=[],s=[],i=[],c=0),r=0;r<d;r++)r<s.length&&s[r]!==u[r]?a[r]((()=>u[r])):r>=s.length&&(i[r]=v(f));for(;r<s.length;r++)l[r]();return c=a.length=l.length=d,s=u.slice(0),i=i.slice(0,c)}));function f(e){l[r]=e;const[n,o]=m(u[r]);return a[r]=o,t(n,r)}}}((()=>e.each),e.children,t||void 0))}function Q(e){const t=e.keyed,n=b((()=>e.when),void 0,void 0),r=t?n:b(n,void 0,{equals:(e,t)=>!e==!t});return b((()=>{const o=r();if(o){const s=e.children;return"function"==typeof s&&s.length>0?w((()=>s(t?o:()=>{if(!w(r))throw G("Show");return n()}))):s}return e.fallback}),void 0,void 0)}function Y(e){const t=S((()=>e.children)),n=b((()=>{const e=t(),n=Array.isArray(e)?e:[e];let r=()=>{};for(let e=0;e<n.length;e++){const t=e,o=n[e],s=r,i=b((()=>s()?void 0:o.when),void 0,void 0),l=o.keyed?i:b(i,void 0,{equals:(e,t)=>!e==!t});r=()=>s()||(l()?[t,i,o]:void 0)}return r}));return b((()=>{const t=n()();if(!t)return e.fallback;const[r,o,s]=t,i=s.children;return"function"==typeof i&&i.length>0?w((()=>i(s.keyed?o():()=>{if(w(n)()?.[0]!==r)throw G("Match");return o()}))):i}),void 0,void 0)}function ee(e){return e}const te="_$DX_DELEGATE";function ne(e,t,n,r={}){let o;return v((r=>{o=r,t===document?e():ce(t,e(),t.firstChild?null:void 0,n)}),r.owner),()=>{o(),t.textContent=""}}function re(e,t,n,r){let o;const s=()=>{const t=document.createElement("template");return t.innerHTML=e,t.content.firstChild},i=t?()=>w((()=>document.importNode(o||(o=s()),!0))):()=>(o||(o=s())).cloneNode(!0);return i.cloneNode=i,i}function oe(e,t=window.document){const n=t[te]||(t[te]=new Set);for(let r=0,o=e.length;r<o;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,ue))}}function se(e,t){null==t?e.removeAttribute("class"):e.className=t}function ie(e,t,n,r){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function le(e,t,n){if(!t)return n?function(e,t){e.removeAttribute(t)}(e,"style"):t;const r=e.style;if("string"==typeof t)return r.cssText=t;let o,s;for(s in"string"==typeof n&&(r.cssText=n=void 0),n||(n={}),t||(t={}),n)null==t[s]&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function ae(e,t,n){return w((()=>e(t,n)))}function ce(e,t,n,r){if(void 0===n||r||(r=[]),"function"!=typeof t)return de(e,t,r,n);y((r=>de(e,t(),r,n)),r)}function ue(e){let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=t=>Object.defineProperty(e,"target",{configurable:!0,value:t}),i=()=>{const r=t[n];if(r&&!t.disabled){const o=t[`${n}Data`];if(void 0!==o?r.call(t,o,e):r.call(t,e),e.cancelBubble)return}return t.host&&"string"!=typeof t.host&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},l=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>t||document}),e.composedPath){const n=e.composedPath();s(n[0]);for(let e=0;e<n.length-2&&(t=n[e],i());e++){if(t._$host){t=t._$host,l();break}if(t.parentNode===o)break}}else l();s(r)}function de(e,t,n,r,o){for(;"function"==typeof n;)n=n();if(t===n)return n;const s=typeof t,i=void 0!==r;if(e=i&&n[0]&&n[0].parentNode||e,"string"===s||"number"===s){if("number"===s&&(t=t.toString())===n)return n;if(i){let o=n[0];o&&3===o.nodeType?o.data!==t&&(o.data=t):o=document.createTextNode(t),n=pe(e,n,r,o)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t}else if(null==t||"boolean"===s)n=pe(e,n,r);else{if("function"===s)return y((()=>{let o=t();for(;"function"==typeof o;)o=o();n=de(e,o,n,r)})),()=>n;if(Array.isArray(t)){const s=[],l=n&&Array.isArray(n);if(fe(s,t,n,o))return y((()=>n=de(e,s,n,r,!0))),()=>n;if(0===s.length){if(n=pe(e,n,r),i)return n}else l?0===n.length?he(e,s,r):function(e,t,n){let r=n.length,o=t.length,s=r,i=0,l=0,a=t[o-1].nextSibling,c=null;for(;i<o||l<s;)if(t[i]!==n[l]){for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const t=s<r?l?n[l-1].nextSibling:n[s-l]:a;for(;l<s;)e.insertBefore(n[l++],t)}else if(s===l)for(;i<o;)c&&c.has(t[i])||t[i].remove(),i++;else if(t[i]===n[s-1]&&n[l]===t[o-1]){const r=t[--o].nextSibling;e.insertBefore(n[l++],t[i++].nextSibling),e.insertBefore(n[--s],r),t[o]=n[s]}else{if(!c){c=new Map;let e=l;for(;e<s;)c.set(n[e],e++)}const r=c.get(t[i]);if(null!=r)if(l<r&&r<s){let a,u=i,d=1;for(;++u<o&&u<s&&null!=(a=c.get(t[u]))&&a===r+d;)d++;if(d>r-l){const o=t[i];for(;l<r;)e.insertBefore(n[l++],o)}else e.replaceChild(n[l++],t[i++])}else i++;else t[i++].remove()}}else i++,l++}(e,n,s):(n&&pe(e),he(e,s));n=s}else if(t.nodeType){if(Array.isArray(n)){if(i)return n=pe(e,n,r,t);pe(e,n,null,t)}else null!=n&&""!==n&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);n=t}}return n}function fe(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let i,l=t[s],a=n&&n[e.length];if(null==l||!0===l||!1===l);else if("object"==(i=typeof l)&&l.nodeType)e.push(l);else if(Array.isArray(l))o=fe(e,l,a)||o;else if("function"===i)if(r){for(;"function"==typeof l;)l=l();o=fe(e,Array.isArray(l)?l:[l],Array.isArray(a)?a:[a])||o}else e.push(l),o=!0;else{const t=String(l);a&&3===a.nodeType&&a.data===t?e.push(a):e.push(document.createTextNode(t))}}return o}function he(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function pe(e,t,n,r){if(void 0===n)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let r=!1;for(let s=t.length-1;s>=0;s--){const i=t[s];if(o!==i){const t=i.parentNode===e;r||s?t&&i.remove():t?e.replaceChild(o,i):e.insertBefore(o,n)}else r=!0}}else e.insertBefore(o,n);return[o]}const ge=Symbol("store-raw"),ve=Symbol("store-node"),me=Symbol("store-has"),ye=Symbol("store-self");function be(e){let t=e[n];if(!t&&(Object.defineProperty(e,n,{value:t=new Proxy(e,xe)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const s=n[o];r[s].get&&Object.defineProperty(e,s,{enumerable:r[s].enumerable,get:r[s].get.bind(t)})}}return t}function ke(e){let t;return null!=e&&"object"==typeof e&&(e[n]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function we(e,t=new Set){let n,r,o,s;if(n=null!=e&&e[ge])return n;if(!ke(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let n=0,s=e.length;n<s;n++)o=e[n],(r=we(o,t))!==o&&(e[n]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const n=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let l=0,a=n.length;l<a;l++)s=n[l],i[s].get||(o=e[s],(r=we(o,t))!==o&&(e[s]=r))}return e}function $e(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function Ae(e,t,n){if(e[t])return e[t];const[r,o]=m(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function Le(e){L()&&Ae($e(e,ve),ye)()}const xe={get(e,t,r){if(t===ge)return e;if(t===n)return r;if(t===o)return Le(e),r;const s=$e(e,ve),i=s[t];let l=i?i():e[t];if(t===ve||t===me||"__proto__"===t)return l;if(!i){const n=Object.getOwnPropertyDescriptor(e,t);!L()||"function"==typeof l&&!e.hasOwnProperty(t)||n&&n.get||(l=Ae(s,t,l)())}return ke(l)?be(l):l},has:(e,t)=>t===ge||t===n||t===o||t===ve||t===me||"__proto__"===t||(L()&&Ae($e(e,me),t)(),t in e),set:()=>!0,deleteProperty:()=>!0,ownKeys:function(e){return Le(e),Reflect.ownKeys(e)},getOwnPropertyDescriptor:function(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return r&&!r.get&&r.configurable&&t!==n&&t!==ve?(delete r.value,delete r.writable,r.get=()=>e[n][t],r):r}};function Ce(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;void 0===n?(delete e[t],e[me]&&e[me][t]&&void 0!==o&&e[me][t].$()):(e[t]=n,e[me]&&e[me][t]&&void 0===o&&e[me][t].$());let i,l=$e(e,ve);if((i=Ae(l,t,o))&&i.$((()=>n)),Array.isArray(e)&&e.length!==s){for(let t=e.length;t<s;t++)(i=l[t])&&i.$();(i=Ae(l,"length",s))&&i.$(e.length)}(i=l[ye])&&i.$()}function _e(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Ce(e,o,t[o])}}function Se(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const s=typeof r,i=Array.isArray(e);if(Array.isArray(r)){for(let o=0;o<r.length;o++)Se(e,[r[o]].concat(t),n);return}if(i&&"function"===s){for(let o=0;o<e.length;o++)r(e[o],o)&&Se(e,[o].concat(t),n);return}if(i&&"object"===s){const{from:o=0,to:s=e.length-1,by:i=1}=r;for(let r=o;r<=s;r+=i)Se(e,[r].concat(t),n);return}if(t.length>1)return void Se(e[r],t,[r].concat(n));o=e[r],n=[r].concat(n)}let s=t[0];"function"==typeof s&&(s=s(o,n),s===o)||void 0===r&&null==s||(s=we(s),void 0===r||ke(o)&&ke(s)&&!Array.isArray(s)?_e(o,s):Ce(e,r,s))}function Ee(...[e,t]){const n=we(e||{}),r=Array.isArray(n);return[be(n),function(...e){k((()=>{r&&1===e.length?function(e,t){if("function"==typeof t&&(t=t(e)),t=we(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const r=t[n];e[n]!==r&&Ce(e,n,r)}Ce(e,"length",r)}else _e(e,t)}(n,e[0]):Se(n,e)}))}]}const Pe=Symbol("store-root");function Me(e,t,n,r,o){const s=t[n];if(e===s)return;const i=Array.isArray(e);if(n!==Pe&&(!ke(e)||!ke(s)||i!==Array.isArray(s)||o&&e[o]!==s[o]))return void Ce(t,n,e);if(i){if(e.length&&s.length&&(!r||o&&e[0]&&null!=e[0][o])){let t,n,i,l,a,c,u,d;for(i=0,l=Math.min(s.length,e.length);i<l&&(s[i]===e[i]||o&&s[i]&&e[i]&&s[i][o]===e[i][o]);i++)Me(e[i],s,i,r,o);const f=new Array(e.length),h=new Map;for(l=s.length-1,a=e.length-1;l>=i&&a>=i&&(s[l]===e[a]||o&&s[l]&&e[a]&&s[l][o]===e[a][o]);l--,a--)f[a]=s[l];if(i>a||i>l){for(n=i;n<=a;n++)Ce(s,n,e[n]);for(;n<e.length;n++)Ce(s,n,f[n]),Me(e[n],s,n,r,o);return void(s.length>e.length&&Ce(s,"length",e.length))}for(u=new Array(a+1),n=a;n>=i;n--)c=e[n],d=o&&c?c[o]:c,t=h.get(d),u[n]=void 0===t?-1:t,h.set(d,n);for(t=i;t<=l;t++)c=s[t],d=o&&c?c[o]:c,n=h.get(d),void 0!==n&&-1!==n&&(f[n]=s[t],n=u[n],h.set(d,n));for(n=i;n<e.length;n++)n in f?(Ce(s,n,f[n]),Me(e[n],s,n,r,o)):Ce(s,n,e[n])}else for(let t=0,n=e.length;t<n;t++)Me(e[t],s,t,r,o);return void(s.length>e.length&&Ce(s,"length",e.length))}const l=Object.keys(e);for(let t=0,n=l.length;t<n;t++)Me(e[l[t]],s,l[t],r,o);const a=Object.keys(s);for(let t=0,n=a.length;t<n;t++)void 0===e[a[t]]&&Ce(s,a[t],void 0)}function Te(e,t={}){const{merge:n,key:r="id"}=t,o=we(e);return e=>{if(!ke(e)||!ke(o))return o;const t=Me(o,{[Pe]:e},Pe,n,r);return void 0===t?e:t}}const Fe=()=>{},Oe=(e,t)=>t();function Ne(e,t){const n=w(e),r=n?[n]:[],{onEnter:o=Oe,onExit:s=Oe}=t,[i,a]=m(t.appear?[]:r),[c]=[C,x];let u,d=!1;function f(e,t){if(!e)return t&&t();d=!0,s(e,(()=>{k((()=>{d=!1,a((t=>t.filter((t=>t!==e)))),t&&t()}))}))}function h(e){const t=u;if(!t)return e&&e();u=void 0,a((e=>[t,...e])),o(t,e??Fe)}const p="out-in"===t.mode?e=>d||f(e,h):"in-out"===t.mode?e=>h((()=>f(e))):e=>{f(e),h()};var g,v;return g=t=>{const n=e();return w(c)?(c(),t):(n!==t&&(u=n,k((()=>w((()=>p(t)))))),n)},v=t.appear?void 0:n,M(T(g,v,!0,l)),i}const He=e=>e instanceof Element;function je(e,t){if(t(e))return e;if("function"==typeof e&&!e.length)return je(e(),t);if(Array.isArray(e))for(const n of e){const e=je(n,t);if(e)return e}return null}function ze(e,t=He,n=He){const r=b(e);return b((()=>je(r(),t)))}function We(e){requestAnimationFrame((()=>requestAnimationFrame(e)))}var Be={inout:"in-out",outin:"out-in"},De=e=>{const t=function(e){return b((()=>{const t=e.name||"s";return{enterActive:(e.enterActiveClass||t+"-enter-active").split(" "),enter:(e.enterClass||t+"-enter").split(" "),enterTo:(e.enterToClass||t+"-enter-to").split(" "),exitActive:(e.exitActiveClass||t+"-exit-active").split(" "),exit:(e.exitClass||t+"-exit").split(" "),exitTo:(e.exitToClass||t+"-exit-to").split(" "),move:(e.moveClass||t+"-move").split(" ")}}))}(e);return Ne(ze((()=>e.children)),{mode:Be[e.mode],appear:e.appear,onEnter(n,r){!function(e,t,n,r){const{onBeforeEnter:o,onEnter:s,onAfterEnter:i}=t;function l(t){t&&t.target!==n||(r?.(),n.removeEventListener("transitionend",l),n.removeEventListener("animationend",l),n.classList.remove(...e.enterActive),n.classList.remove(...e.enterTo),i?.(n))}o?.(n),n.classList.add(...e.enter),n.classList.add(...e.enterActive),queueMicrotask((()=>{if(!n.parentNode)return r?.();s?.(n,(()=>l()))})),We((()=>{n.classList.remove(...e.enter),n.classList.add(...e.enterTo),(!s||s.length<2)&&(n.addEventListener("transitionend",l),n.addEventListener("animationend",l))}))}(t(),e,n,r)},onExit(n,r){!function(e,t,n,r){const{onBeforeExit:o,onExit:s,onAfterExit:i}=t;if(!n.parentNode)return r?.();function l(t){t&&t.target!==n||(r?.(),n.removeEventListener("transitionend",l),n.removeEventListener("animationend",l),n.classList.remove(...e.exitActive),n.classList.remove(...e.exitTo),i?.(n))}o?.(n),n.classList.add(...e.exit),n.classList.add(...e.exitActive),s?.(n,(()=>l())),We((()=>{n.classList.remove(...e.exit),n.classList.add(...e.exitTo),(!s||s.length<2)&&(n.addEventListener("transitionend",l),n.addEventListener("animationend",l))}))}(t(),e,n,r)}})};const Ke=re("<span></span>",2);var qe=e=>{const t=b((()=>{if(1==e.text.length){const t=e.text.codePointAt(0);if(t>=9600&&t<=9631||57520==t||57522==t)return t}})),n=b((()=>t()?" ":e.text)),r=b((()=>function(e,t,n){const r=e.get("fg"),o=e.get("bg");let s={"--offset":t,width:`${n+.01}ch`};"string"==typeof r&&(s["--fg"]=r);"string"==typeof o&&(s["--bg"]=o);return s}(e.pen,e.offset,e.cellCount))),o=b((()=>function(e,t,n){const r=Ze(e.get("fg"),e.get("bold"),"fg-"),o=Ze(e.get("bg"),!1,"bg-");let s=n??"";void 0!==t&&(s+=` cp-${t.toString(16)}`);r&&(s+=" "+r);o&&(s+=" "+o);e.has("bold")&&(s+=" ap-bright");e.has("faint")&&(s+=" ap-faint");e.has("italic")&&(s+=" ap-italic");e.has("underline")&&(s+=" ap-underline");e.has("blink")&&(s+=" ap-blink");e.get("inverse")&&(s+=" ap-inverse");return s}(e.pen,t(),e.extraClass)));return(()=>{const e=Ke.cloneNode(!0);return ce(e,n),y((t=>{const n=o(),s=r();return n!==t._v$&&se(e,t._v$=n),t._v$2=le(e,s,t._v$2),t}),{_v$:void 0,_v$2:void 0}),e})()};function Ze(e,t,n){if("number"==typeof e)return t&&e<8&&(e+=8),`${n}${e}`}const Re=re('<span class="ap-line" role="paragraph"></span>',2);var Ie=e=>(()=>{const t=Re.cloneNode(!0);return ce(t,Z(J,{get each(){return(()=>{if("number"==typeof e.cursor){const t=[];let n=0,r=0;for(;r<e.segments.length&&n+e.segments[r].cellCount-1<e.cursor;){const o=e.segments[r];t.push(o),n+=o.cellCount,r++}if(r<e.segments.length){const o=e.segments[r],s=o.charWidth;let i=e.cursor-n;const l=Math.floor(i/s);i=l*s;const a=Array.from(o.text);for(l>0&&t.push({...o,text:a.slice(0,l).join("")}),t.push({...o,text:a[l],offset:n+i,cellCount:s,extraClass:"ap-cursor"}),l<a.length-1&&t.push({...o,text:a.slice(l+1).join(""),offset:n+i+1,cellCount:o.cellCount-s}),r++;r<e.segments.length;){const n=e.segments[r];t.push(n),r++}}return t}return e.segments})()},children:e=>Z(qe,function(...e){let t=!1;for(let r=0;r<e.length;r++){const o=e[r];t=t||!!o&&n in o,e[r]="function"==typeof o?(t=!0,b(o)):o}if(r&&t)return new Proxy({get(t){for(let n=e.length-1;n>=0;n--){const r=U(e[n])[t];if(void 0!==r)return r}},has(t){for(let n=e.length-1;n>=0;n--)if(t in U(e[n]))return!0;return!1},keys(){const t=[];for(let n=0;n<e.length;n++)t.push(...Object.keys(U(e[n])));return[...new Set(t)]}},I);const o={},s=Object.create(null);for(let t=e.length-1;t>=0;t--){const n=e[t];if(!n)continue;const r=Object.getOwnPropertyNames(n);for(let e=r.length-1;e>=0;e--){const t=r[e];if("__proto__"===t||"constructor"===t)continue;const i=Object.getOwnPropertyDescriptor(n,t);if(s[t]){const e=o[t];e&&(i.get?e.push(i.get.bind(n)):void 0!==i.value&&e.push((()=>i.value)))}else s[t]=i.get?{enumerable:!0,configurable:!0,get:X.bind(o[t]=[i.get.bind(n)])}:void 0!==i.value?i:void 0}}const i={},l=Object.keys(s);for(let e=l.length-1;e>=0;e--){const t=l[e],n=s[t];n&&n.get?Object.defineProperty(i,t,n):i[t]=n?n.value:void 0}return i}(e))})),t})();const Ue=re('<pre class="ap-terminal" aria-live="off" tabindex="0"></pre>',2);var Xe=e=>{const t=()=>e.lineHeight??1.3333333333,n=b((()=>({width:`${e.cols}ch`,height:t()*e.rows+"em","font-size":100*(e.scale||1)+"%","font-family":e.fontFamily,"--term-line-height":`${t()}em`,"--term-cols":e.cols}))),r=b((()=>e.cursor?.[0])),o=b((()=>e.cursor?.[1]));return(()=>{const t=Ue.cloneNode(!0),s=e.ref;return"function"==typeof s?ae(s,t):e.ref=t,ce(t,Z(V,{get each(){return e.lines},children:(e,t)=>Z(Ie,{get segments(){return e.segments},get cursor(){return(e=()=>t()===o(),b((()=>e())))()?r():null;var e}})})),y((r=>{const o=!(!e.blink&&!e.cursorHold),s=!!e.blink,i=n();return o!==r._v$&&t.classList.toggle("ap-cursor-on",r._v$=o),s!==r._v$2&&t.classList.toggle("ap-blink",r._v$2=s),r._v$3=le(t,i,r._v$3),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()};const Ge=re('<svg version="1.1" viewBox="0 0 12 12" class="ap-icon ap-icon-fullscreen-off"><path d="M7,5 L7,0 L9,2 L11,0 L12,1 L10,3 L12,5 Z"></path><path d="M5,7 L0,7 L2,9 L0,11 L1,12 L3,10 L5,12 Z"></path></svg>',6);var Ve=e=>Ge.cloneNode(!0);const Je=re('<svg version="1.1" viewBox="6 8 14 16" class="ap-icon"><path d="M0.938 8.313h22.125c0.5 0 0.938 0.438 0.938 0.938v13.5c0 0.5-0.438 0.938-0.938 0.938h-22.125c-0.5 0-0.938-0.438-0.938-0.938v-13.5c0-0.5 0.438-0.938 0.938-0.938zM1.594 22.063h20.813v-12.156h-20.813v12.156zM3.844 11.188h1.906v1.938h-1.906v-1.938zM7.469 11.188h1.906v1.938h-1.906v-1.938zM11.031 11.188h1.938v1.938h-1.938v-1.938zM14.656 11.188h1.875v1.938h-1.875v-1.938zM18.25 11.188h1.906v1.938h-1.906v-1.938zM5.656 15.031h1.938v1.938h-1.938v-1.938zM9.281 16.969v-1.938h1.906v1.938h-1.906zM12.875 16.969v-1.938h1.906v1.938h-1.906zM18.406 16.969h-1.938v-1.938h1.938v1.938zM16.531 20.781h-9.063v-1.906h9.063v1.906z"></path></svg>',4);var Qe=e=>Je.cloneNode(!0);const Ye=re('<svg version="1.1" viewBox="0 0 12 12" class="ap-icon" aria-label="Pause" role="button"><path d="M1,0 L4,0 L4,12 L1,12 Z"></path><path d="M8,0 L11,0 L11,12 L8,12 Z"></path></svg>',6);var et=e=>Ye.cloneNode(!0);const tt=re('<svg version="1.1" viewBox="0 0 12 12" class="ap-icon" aria-label="Play" role="button"><path d="M1,0 L11,6 L1,12 Z"></path></svg>',4);var nt=e=>tt.cloneNode(!0);const rt=re('<svg version="1.1" viewBox="0 0 12 12" class="ap-icon ap-icon-fullscreen-on"><path d="M12,0 L7,0 L9,2 L7,4 L8,5 L10,3 L12,5 Z"></path><path d="M0,12 L0,7 L2,9 L4,7 L5,8 L3,10 L5,12 Z"></path></svg>',6);var ot=e=>rt.cloneNode(!0);const st=re('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M10.5 3.75a.75.75 0 0 0-1.264-.546L5.203 7H2.667a.75.75 0 0 0-.7.48A6.985 6.985 0 0 0 1.5 10c0 .887.165 1.737.468 2.52.111.29.39.48.7.48h2.535l4.033 3.796a.75.75 0 0 0 1.264-.546V3.75ZM16.45 5.05a.75.75 0 0 0-1.06 1.061 5.5 5.5 0 0 1 0 7.778.75.75 0 0 0 1.06 1.06 7 7 0 0 0 0-9.899Z"></path><path d="M14.329 7.172a.75.75 0 0 0-1.061 1.06 2.5 2.5 0 0 1 0 3.536.75.75 0 0 0 1.06 1.06 4 4 0 0 0 0-5.656Z"></path></svg>',6);var it=e=>st.cloneNode(!0);const lt=re('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M10.047 3.062a.75.75 0 0 1 .453.688v12.5a.75.75 0 0 1-1.264.546L5.203 13H2.667a.75.75 0 0 1-.7-.48A6.985 6.985 0 0 1 1.5 10c0-.887.165-1.737.468-2.52a.75.75 0 0 1 .7-.48h2.535l4.033-3.796a.75.75 0 0 1 .811-.142ZM13.78 7.22a.75.75 0 1 0-1.06 1.06L14.44 10l-1.72 1.72a.75.75 0 0 0 1.06 1.06l1.72-1.72 1.72 1.72a.75.75 0 1 0 1.06-1.06L16.56 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L15.5 8.94l-1.72-1.72Z"></path></svg>',4);var at=e=>lt.cloneNode(!0);const ct=re('<span class="ap-button ap-playback-button" tabindex="0"></span>',2),ut=re('<span class="ap-bar"><span class="ap-gutter ap-gutter-empty"></span><span class="ap-gutter ap-gutter-full"></span></span>',6),dt=re('<span class="ap-tooltip">Unmute (m)</span>',2),ft=re('<span class="ap-tooltip">Mute (m)</span>',2),ht=re('<span class="ap-button ap-speaker-button ap-tooltip-container" aria-label="Mute / unmute" role="button" tabindex="0"></span>',2),pt=re('<div class="ap-control-bar"><span class="ap-timer" aria-readonly="true" role="textbox" tabindex="0"><span class="ap-time-elapsed"></span><span class="ap-time-remaining"></span></span><span class="ap-progressbar"></span><span class="ap-button ap-kbd-button ap-tooltip-container" aria-label="Show keyboard shortcuts" role="button" tabindex="0"><span class="ap-tooltip">Keyboard shortcuts (?)</span></span><span class="ap-button ap-fullscreen-button ap-tooltip-container" aria-label="Toggle fullscreen mode" role="button" tabindex="0"><span class="ap-tooltip">Fullscreen (f)</span></span></div>',18),gt=re('<span class="ap-marker-container ap-tooltip-container"><span class="ap-marker"></span><span class="ap-tooltip"></span></span>',6);function vt(e){let t=Math.floor(e);const n=Math.floor(t/86400);t%=86400;const r=Math.floor(t/3600);t%=3600;const o=Math.floor(t/60);return t%=60,n>0?`${mt(n)}:${mt(r)}:${mt(o)}:${mt(t)}`:r>0?`${mt(r)}:${mt(o)}:${mt(t)}`:`${mt(o)}:${mt(t)}`}function mt(e){return e<10?`0${e}`:e.toString()}var yt=e=>{const t=e=>t=>{t.preventDefault(),e(t)},n=()=>"number"==typeof e.currentTime?vt(e.currentTime):"--:--",r=()=>"number"==typeof e.remainingTime?"-"+vt(e.remainingTime):n(),o=b((()=>"number"==typeof e.duration?e.markers.filter((t=>t[0]<e.duration)):[])),s=e=>{const t=e.currentTarget.offsetWidth,n=e.currentTarget.getBoundingClientRect(),r=e.clientX-n.left;return 100*Math.max(0,r/t)+"%"},[i,l]=m(!1),a=function(e,t){let n=!0;return function(){if(n){n=!1;for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];e.apply(this,o),setTimeout((()=>n=!0),t)}}}(e.onSeekClick,50),c=t=>{t._marker||t.altKey||t.shiftKey||t.metaKey||t.ctrlKey||0!==t.button||(l(!0),e.onSeekClick(s(t)))},u=e=>{e.altKey||e.shiftKey||e.metaKey||e.ctrlKey||i()&&a(s(e))},d=()=>{l(!1)};return document.addEventListener("mouseup",d),A((()=>{document.removeEventListener("mouseup",d)})),(()=>{const s=pt.cloneNode(!0),i=s.firstChild,l=i.firstChild,a=l.nextSibling,d=i.nextSibling,f=d.nextSibling,h=f.firstChild,p=f.nextSibling,g=p.firstChild,v=e.ref;return"function"==typeof v?ae(v,s):e.ref=s,ce(s,Z(Q,{get when(){return e.isPausable},get children(){const n=ct.cloneNode(!0);return ie(n,"click",t(e.onPlayClick)),ce(n,Z(Y,{get children(){return[Z(ee,{get when(){return e.isPlaying},get children(){return Z(et,{})}}),Z(ee,{when:!0,get children(){return Z(nt,{})}})]}})),n}}),i),ce(l,n),ce(a,r),ce(d,Z(Q,{get when(){return"number"==typeof e.progress||e.isSeekable},get children(){const n=ut.cloneNode(!0),r=n.firstChild.nextSibling;return n.$$mousemove=u,n.$$mousedown=c,ce(n,Z(V,{get each(){return o()},children:(n,r)=>(()=>{const o=gt.cloneNode(!0),s=o.firstChild,i=s.nextSibling;var l;return o.$$mousedown=e=>{e._marker=!0},ie(o,"click",(l=r(),t((()=>{e.onSeekClick({marker:l})})))),ce(i,(()=>(e=>""===e[1]?vt(e[0]):`${vt(e[0])} - ${e[1]}`)(n))),y((t=>{const r=(t=>t[0]/e.duration*100+"%")(n),i=!!(t=>"number"==typeof e.currentTime&&t[0]<=e.currentTime)(n);return r!==t._v$&&o.style.setProperty("left",t._v$=r),i!==t._v$2&&s.classList.toggle("ap-marker-past",t._v$2=i),t}),{_v$:void 0,_v$2:void 0}),o})()}),null),y((t=>le(r,{transform:`scaleX(${e.progress||0}`},t))),n}})),ce(s,Z(Q,{get when(){return void 0!==e.isMuted},get children(){const n=ht.cloneNode(!0);return ie(n,"click",t(e.onMuteClick)),ce(n,Z(Y,{get children(){return[Z(ee,{get when(){return!0===e.isMuted},get children(){return[Z(at,{}),dt.cloneNode(!0)]}}),Z(ee,{get when(){return!1===e.isMuted},get children(){return[Z(it,{}),ft.cloneNode(!0)]}})]}})),n}}),f),ie(f,"click",t(e.onHelpClick)),ce(f,Z(Qe,{}),h),ie(p,"click",t(e.onFullscreenClick)),ce(p,Z(ot,{}),g),ce(p,Z(Ve,{}),g),y((()=>s.classList.toggle("ap-seekable",!!e.isSeekable))),s})()};oe(["click","mousedown","mousemove"]);const bt=re('<div class="ap-overlay ap-overlay-error"><span>üí•</span></div>',4);var kt=e=>bt.cloneNode(!0);const wt=re('<div class="ap-overlay ap-overlay-loading"><span class="ap-loader"></span></div>',4);var $t=e=>wt.cloneNode(!0);const At=re('<div class="ap-overlay ap-overlay-info"><span></span></div>',4);var Lt=e=>(()=>{const t=At.cloneNode(!0),n=t.firstChild;return ce(n,(()=>e.message)),y((r=>{const o=!!e.wasPlaying,s={"font-family":e.fontFamily};return o!==r._v$&&t.classList.toggle("ap-was-playing",r._v$=o),r._v$2=le(n,s,r._v$2),r}),{_v$:void 0,_v$2:void 0}),t})();const xt=re('<div class="ap-overlay ap-overlay-start"><div class="ap-play-button"><div><span><svg version="1.1" viewBox="0 0 1000.0 1000.0" class="ap-icon"><defs><mask id="small-triangle-mask"><rect width="100%" height="100%" fill="white"></rect><polygon points="700.0 500.0, 400.00000000000006 326.7949192431122, 399.9999999999999 673.2050807568877" fill="black"></polygon></mask></defs><polygon points="1000.0 500.0, 250.0000000000001 66.98729810778059, 249.99999999999977 933.0127018922192" mask="url(#small-triangle-mask)" fill="white" class="ap-play-btn-fill"></polygon><polyline points="673.2050807568878 400.0, 326.7949192431123 600.0" stroke="white" stroke-width="90" class="ap-play-btn-stroke"></polyline></svg></span></div></div></div>',22);var Ct=e=>(()=>{const t=xt.cloneNode(!0);var n;return ie(t,"click",(n=e.onClick,e=>{e.preventDefault(),n(e)})),t})();oe(["click"]);const _t=re("<li><kbd>space</kbd> - pause / resume</li>",4),St=re("<li><kbd>‚Üê</kbd> / <kbd>‚Üí</kbd> - rewind / fast-forward by 5 seconds</li>",6),Et=re("<li><kbd>Shift</kbd> + <kbd>‚Üê</kbd> / <kbd>‚Üí</kbd> - rewind / fast-forward by 10%</li>",8),Pt=re("<li><kbd>[</kbd> / <kbd>]</kbd> - jump to the previous / next marker</li>",6),Mt=re("<li><kbd>0</kbd>, <kbd>1</kbd>, <kbd>2</kbd> ... <kbd>9</kbd> - jump to 0%, 10%, 20% ... 90%</li>",10),Tt=re("<li><kbd>,</kbd> / <kbd>.</kbd> - step back / forward, a frame at a time (when paused)</li>",6),Ft=re("<li><kbd>m</kbd> - mute / unmute audio</li>",4),Ot=re('<div class="ap-overlay ap-overlay-help"><div><div><p>Keyboard shortcuts</p><ul><li><kbd>f</kbd> - toggle fullscreen mode</li><li><kbd>?</kbd> - show this help popup</li></ul></div></div></div>',18);var Nt=e=>(()=>{const t=Ot.cloneNode(!0),n=t.firstChild,r=n.firstChild.firstChild.nextSibling,o=r.firstChild,s=o.nextSibling;var i;return ie(t,"click",(i=e.onClose,e=>{e.preventDefault(),i(e)})),n.$$click=e=>{e.stopPropagation()},ce(r,Z(Q,{get when(){return e.isPausable},get children(){return _t.cloneNode(!0)}}),o),ce(r,Z(Q,{get when(){return e.isSeekable},get children(){return[St.cloneNode(!0),Et.cloneNode(!0),Pt.cloneNode(!0),Mt.cloneNode(!0),Tt.cloneNode(!0)]}}),o),ce(r,Z(Q,{get when(){return e.hasAudio},get children(){return Ft.cloneNode(!0)}}),s),y((n=>le(t,{"font-family":e.fontFamily},n))),t})();oe(["click"]);const Ht=re('<div class="ap-wrapper" tabindex="-1"><div></div></div>',4);var jt=e=>{const t=e.logger,n=e.core,r=e.autoPlay,[o,s]=Ee({lines:[],cursor:void 0,charW:e.charW,charH:e.charH,bordersW:e.bordersW,bordersH:e.bordersH,containerW:0,containerH:0,isPausable:!0,isSeekable:!0,isFullscreen:!1,currentTime:null,remainingTime:null,progress:null,blink:!0,cursorHold:!1}),[i,l]=m(!1),[a,c]=m(void 0),[u,d]=m(!1),[f,h]=m(r?null:"start"),[p,g]=m(null),[v,w]=m({cols:e.cols,rows:e.rows},{equals:(e,t)=>e.cols===t.cols&&e.rows===t.rows}),[L,x]=m(void 0),[C,_]=Ee([]),[S,E]=m(!1),[P,M]=m(!1),[T,F]=m(void 0),O=b((()=>v().cols||80)),N=b((()=>v().rows||24)),H=()=>!1===e.controls?0:32;let j,z,W,B,D,K,q,R,I,U;function X(){be(),ve(),me()}function G(e){k((()=>{e.rows<v().rows&&s("lines",o.lines.slice(0,e.rows)),w(e)}))}function V(e){null===e||r||s({lines:e.lines,cursor:e.cursor})}const J=new Promise((e=>{U=e}));n.addEventListener("ready",(e=>{let{isPausable:t,isSeekable:n,poster:r}=e;s({isPausable:t,isSeekable:n}),V(r),U()})),n.addEventListener("metadata",(e=>{let{cols:t,rows:n,duration:r,theme:o,poster:s,markers:i,hasAudio:l}=e;k((()=>{G({cols:t,rows:n}),x(r),F(o),_(i),V(s),c(!l&&void 0)}))})),n.addEventListener("play",(()=>{h(null)})),n.addEventListener("playing",(()=>{k((()=>{l(!0),d(!0),h(null),re(),ye(),ge()}))})),n.addEventListener("idle",(()=>{k((()=>{l(!1),X()}))})),n.addEventListener("loading",(()=>{k((()=>{l(!1),X(),h("loader")}))})),n.addEventListener("offline",(e=>{let{message:t}=e;k((()=>{l(!1),X(),void 0!==t&&(g(t),h("info"))}))})),n.addEventListener("muted",(e=>{c(e)}));let te=0;n.addEventListener("ended",(e=>{let{message:n}=e;k((()=>{l(!1),X(),void 0!==n&&(g(n),h("info"))})),t.debug(`view: render count: ${te}`)})),n.addEventListener("errored",(()=>{h("error")})),n.addEventListener("resize",G),n.addEventListener("reset",(e=>{let{cols:t,rows:n,theme:r}=e;k((()=>{G({cols:t,rows:n}),F(r),re()}))})),n.addEventListener("seeked",(()=>{me()})),n.addEventListener("terminalUpdate",(()=>{void 0===j&&(j=requestAnimationFrame(re))}));const ne=()=>{I=new ResizeObserver(function(e,t){let n;return function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];clearTimeout(n),n=setTimeout((()=>e.apply(this,o)),t)}}((e=>{s({containerW:D.offsetWidth,containerH:D.offsetHeight}),D.dispatchEvent(new CustomEvent("resize",{detail:{el:K}}))}),10)),I.observe(D)};$((async()=>{t.info("view: mounted"),t.debug("view: font measurements",{charW:o.charW,charH:o.charH}),ne(),s({containerW:D.offsetWidth,containerH:D.offsetHeight})})),A((()=>{n.stop(),be(),ve(),I.disconnect()}));const re=async()=>{const e=await n.getChanges();k((()=>{void 0!==e.lines&&e.lines.forEach(((e,t)=>{s("lines",t,Te(e))})),void 0!==e.cursor&&s("cursor",Te(e.cursor)),s("cursorHold",!0)})),j=void 0,te+=1},oe=b((()=>{const t=o.charW*O()+o.bordersW,n=o.charH*N()+o.bordersH;let r=e.fit??"width";if("both"===r||o.isFullscreen){r=o.containerW/(o.containerH-H())>t/n?"height":"width"}if(!1===r||"none"===r)return{};if("width"===r){const e=o.containerW/t;return{scale:e,width:o.containerW,height:n*e+H()}}if("height"===r){const e=(o.containerH-H())/n;return{scale:e,width:t*e,height:o.containerH}}throw`unsupported fit mode: ${r}`})),ie=()=>{s("isFullscreen",document.fullscreenElement??document.webkitFullscreenElement)},ue=()=>{o.isFullscreen?(document.exitFullscreen??document.webkitExitFullscreen??(()=>{})).apply(document):(D.requestFullscreen??D.webkitRequestFullscreen??(()=>{})).apply(D)},de=()=>{P()?M(!1):(n.pause(),M(!0))},fe=e=>{if(!(e.altKey||e.metaKey||e.ctrlKey)){if(" "==e.key)n.togglePlay();else if(","==e.key)n.step(-1).then(me);else if("."==e.key)n.step().then(me);else if("f"==e.key)ue();else if("m"==e.key)Le();else if("["==e.key)n.seek({marker:"prev"});else if("]"==e.key)n.seek({marker:"next"});else if(e.key.charCodeAt(0)>=48&&e.key.charCodeAt(0)<=57){const t=(e.key.charCodeAt(0)-48)/10;n.seek(100*t+"%")}else if("?"==e.key)de();else if("ArrowLeft"==e.key)e.shiftKey?n.seek("<<<"):n.seek("<<");else if("ArrowRight"==e.key)e.shiftKey?n.seek(">>>"):n.seek(">>");else{if("Escape"!=e.key)return;M(!1)}e.stopPropagation(),e.preventDefault()}},he=()=>{o.isFullscreen&&ke(!0)},pe=()=>{o.isFullscreen||ke(!1)},ge=()=>{W=setInterval(me,100)},ve=()=>{clearInterval(W)},me=async()=>{const e=await n.getCurrentTime(),t=await n.getRemainingTime(),r=await n.getProgress();s({currentTime:e,remainingTime:t,progress:r})},ye=()=>{B=setInterval((()=>{s((e=>{const t={blink:!e.blink};return t.blink&&(t.cursorHold=!1),t}))}),600)},be=()=>{clearInterval(B),s("blink",!0)},ke=e=>{clearTimeout(z),e&&(z=setTimeout((()=>ke(!1)),2e3)),E(e)},we=b((()=>{const t=e.theme||"auto/asciinema";return"auto/"===t.slice(0,5)?{name:t.slice(5),colors:T()}:{name:t}})),$e=()=>{J.then((()=>n.play()))},Ae=()=>{J.then((()=>n.togglePlay()))},Le=()=>{J.then((()=>{!0===a()?n.unmute():n.mute()}))},xe=e=>{J.then((()=>n.seek(e)))},Ce=(()=>{const t=Ht.cloneNode(!0),n=t.firstChild;"function"==typeof D?ae(D,t):D=t,t.addEventListener("webkitfullscreenchange",ie),t.addEventListener("fullscreenchange",ie),t.$$mousemove=he,t.$$keydown=fe;return"function"==typeof K?ae(K,n):K=n,n.$$mousemove=()=>ke(!0),n.addEventListener("mouseleave",pe),ce(n,Z(Xe,{get cols(){return O()},get rows(){return N()},get scale(){return oe()?.scale},get blink(){return o.blink},get lines(){return o.lines},get cursor(){return o.cursor},get cursorHold(){return o.cursorHold},get fontFamily(){return e.terminalFontFamily},get lineHeight(){return e.terminalLineHeight},ref(e){"function"==typeof q?q(e):q=e}}),null),ce(n,Z(Q,{get when(){return!1!==e.controls},get children(){return Z(yt,{get duration(){return L()},get currentTime(){return o.currentTime},get remainingTime(){return o.remainingTime},get progress(){return o.progress},markers:C,get isPlaying(){return i()||"loader"==f()},get isPausable(){return o.isPausable},get isSeekable(){return o.isSeekable},get isMuted(){return a()},onPlayClick:Ae,onFullscreenClick:ue,onHelpClick:de,onSeekClick:xe,onMuteClick:Le,ref(e){"function"==typeof R?R(e):R=e}})}}),null),ce(n,Z(Y,{get children(){return[Z(ee,{get when(){return"start"==f()},get children(){return Z(Ct,{onClick:$e})}}),Z(ee,{get when(){return"loader"==f()},get children(){return Z($t,{})}}),Z(ee,{get when(){return"error"==f()},get children(){return Z(kt,{})}})]}}),null),ce(n,Z(De,{name:"slide",get children(){return Z(Q,{get when(){return"info"==f()},get children(){return Z(Lt,{get message(){return p()},get fontFamily(){return e.terminalFontFamily},get wasPlaying(){return u()}})}})}}),null),ce(n,Z(Q,{get when(){return P()},get children(){return Z(Nt,{get fontFamily(){return e.terminalFontFamily},onClose:()=>M(!1),get isPausable(){return o.isPausable},get isSeekable(){return o.isSeekable},get hasAudio(){return void 0!==a()}})}}),null),y((r=>{const o=!!(!0===e.controls||"auto"===e.controls&&S()),s=`ap-player asciinema-player-theme-${we().name}`,i=(()=>{const t={};!1!==e.fit&&"none"!==e.fit||void 0===e.terminalFontSize||("small"===e.terminalFontSize?t["font-size"]="12px":"medium"===e.terminalFontSize?t["font-size"]="18px":"big"===e.terminalFontSize?t["font-size"]="24px":t["font-size"]=e.terminalFontSize);const n=oe();void 0!==n.width&&(t.width=`${n.width}px`,t.height=`${n.height}px`);const r=we().colors;return r&&(t["--term-color-foreground"]=r.foreground,t["--term-color-background"]=r.background,r.palette.forEach(((e,n)=>{t[`--term-color-${n}`]=e}))),t})();return o!==r._v$&&t.classList.toggle("ap-hud",r._v$=o),s!==r._v$2&&se(n,r._v$2=s),r._v$3=le(n,i,r._v$3),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})();return Ce};function zt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function(e,t){const n=80,r=24,o=document.createElement("div");let s;o.style.height="0px",o.style.overflow="hidden",o.style.fontSize="15px",document.body.appendChild(o);const i=ne((()=>(s=Z(Xe,{cols:n,rows:r,lineHeight:t,fontFamily:e,lines:[]}),s)),o),l={charW:s.clientWidth/n,charH:s.clientHeight/r,bordersW:s.offsetWidth-s.clientWidth,bordersH:s.offsetHeight-s.clientHeight};return i(),document.body.removeChild(o),l}(n.terminalFontFamily,n.terminalLineHeight),o={core:e,logger:n.logger,cols:n.cols,rows:n.rows,fit:n.fit,controls:n.controls,autoPlay:n.autoPlay,terminalFontSize:n.terminalFontSize,terminalFontFamily:n.terminalFontFamily,terminalLineHeight:n.terminalLineHeight,theme:n.theme,...r};let s;const i=ne((()=>(s=Z(jt,o),s)),t);return{el:s,dispose:i}}oe(["keydown","mousemove"]);const Wt=["autoPlay","autoplay","cols","idleTimeLimit","loop","markers","pauseOnMarkers","poster","preload","rows","speed","startAt","audioUrl"],Bt=["autoPlay","autoplay","cols","controls","fit","rows","terminalFontFamily","terminalFontSize","terminalLineHeight","theme"];class Dt{constructor(e,t,n){this.worker=new Worker(e),this.worker.onmessage=this._onMessage.bind(this),this.nextId=1,this.eventHandlers=new Map([["ended",[]],["errored",[]],["idle",[]],["input",[]],["loading",[]],["marker",[]],["metadata",[]],["offline",[]],["pause",[]],["play",[]],["playing",[]],["ready",[]],["reset",[]],["resize",[]],["seeked",[]],["terminalUpdate",[]]]),this.resolves=new Map,this._sendCommand("new",[t,n])}async init(){return this._sendCommand("init")}play(){return this._sendCommand("play")}pause(){return this._sendCommand("pause")}togglePlay(){return this._sendCommand("togglePlay")}seek(e){return this._sendCommand("seek",e)}step(e){return this._sendCommand("step",e)}stop(){return this._sendCommand("stop")}getChanges(){return this._sendCommand("getChanges")}getCurrentTime(){return this._sendCommand("getCurrentTime")}getRemainingTime(){return this._sendCommand("getRemainingTime")}getProgress(){return this._sendCommand("getProgress")}getDuration(){return this._sendCommand("getDuration")}addEventListener(e,t){const n=this.eventHandlers.get(e);0===n.length&&this._sendNotification("addEventListener",[e]),n.push(t)}_dispatchEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const n of this.eventHandlers.get(e))n(t)}_sendCommand(e,t){let n;const r=new Promise((e=>{n=e}));return this.resolves.set(this.nextId,n),this.worker.postMessage({method:e,params:t,id:this.nextId}),this.nextId++,r}_sendNotification(e,t){this.worker.postMessage({method:e,params:t})}_onMessage(e){void 0!==e.data.id?(this.resolves.get(e.data.id)(e.data.result),this.resolves.delete(e.data.id)):"onEvent"===e.data.method&&this._dispatchEvent(e.data.params.name,e.data.params.event)}}return e.create=function(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=o.logger===console||void 0,i=new Dt(r,e,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.fromEntries(Object.entries(e).filter((e=>{let[t]=e;return Wt.includes(t)})));return n.autoPlay??=n.autoplay,n.speed??=1,{...n,...t}}(o,{logger:s})),l=o.logger??new t,{el:a,dispose:c}=zt(i,n,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.fromEntries(Object.entries(e).filter((e=>{let[t]=e;return Bt.includes(t)})));return n.autoPlay??=n.autoplay,n.controls??="auto",{...n,...t}}(o,{logger:l})),u=i.init(),d={el:a,dispose:c,getCurrentTime:()=>u.then(i.getCurrentTime.bind(i)),getDuration:()=>u.then(i.getDuration.bind(i)),play:()=>u.then(i.play.bind(i)),pause:()=>u.then(i.pause.bind(i)),seek:e=>u.then((()=>i.seek(e))),addEventListener:(e,t)=>i.addEventListener(e,t.bind(d))};return d},e}({});
